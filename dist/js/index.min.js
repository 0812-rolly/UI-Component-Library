const dropdowns=document.querySelectorAll("[data-dropdown]");function createCustomDropdown(e){const t=e.querySelectorAll("option"),n=Array.prototype.slice.call(t),o=document.createElement("div");o.classList.add("dropdown"),e.insertAdjacentElement("afterend",o);const s=document.createElement("div");s.classList.add("dropdown__selected"),s.textContent=n[0].textContent,o.appendChild(s);const l=document.createElement("div");l.classList.add("dropdown__menu"),o.appendChild(l),s.addEventListener("click",function(){null!==this.offsetParent?(this.style.display="none",s.classList.remove("active")):(this.style.display="block",this.querySelector("input").focus(),s.classList.add("active"))}.bind(l));const c=document.createElement("input");c.placeholder="Search...",c.type="text",c.classList.add("dropdown__menu_search"),l.appendChild(c);const a=document.createElement("div");function i(e,t,n){const o=this.dataset.value,s=this.textContent;e.textContent=s,t.value=o,n.style.display="none",n.querySelector("input").value="",n.querySelectorAll("div").forEach((e=>{e.classList.contains("selected")&&e.classList.remove("selected"),null===e.offsetParent&&(e.style.display="block")})),this.classList.add("selected")}a.classList.add("dropdown__menu_items"),l.appendChild(a),n.forEach((t=>{const n=document.createElement("div");n.classList.add("dropdown__menu_item"),n.dataset.value=t.value,n.textContent=t.textContent,a.appendChild(n),n.addEventListener("click",i.bind(n,s,e,l))})),a.querySelector("div").classList.add("selected"),c.addEventListener("input",function(e,t){const n=t.querySelectorAll(".dropdown__menu_items div"),o=this.value.toLowerCase(),s=e.filter((e=>e.value.toLowerCase().includes(o))).map((t=>e.indexOf(t)));e.forEach((t=>{s.includes(e.indexOf(t))?null===n[e.indexOf(t)].offsetParent&&(n[e.indexOf(t)].style.display="block"):n[e.indexOf(t)].style.display="none"}))}.bind(c,n,l)),document.addEventListener("click",function(e,t){null===t.target.closest(".dropdown")&&t.target!==this&&null!==e.offsetParent&&(e.style.display="none")}.bind(o,l)),e.style.display="none"}function init(e){const t=document.createElement("div");t.addEventListener("click",clickOnWrapper),t.classList.add("multi-select");const n=document.createElement("div");n.classList.add("search-container");const o=document.createElement("input");o.classList.add("selected-input"),o.setAttribute("autocomplete","off"),o.setAttribute("tabindex","0"),o.addEventListener("keyup",inputChange),o.addEventListener("keydown",deletePressed),o.addEventListener("click",openOptions);const s=document.createElement("a");s.setAttribute("href","#"),s.setAttribute("onClick","return false"),s.classList.add("dropdown-icon"),s.addEventListener("click",clickDropdown);const l=document.createElement("ul");l.classList.add("autocomplete-list"),n.appendChild(o),n.appendChild(l),n.appendChild(s),e.parentNode.replaceChild(t,e),t.appendChild(e),t.appendChild(n),createInitialTokens(e),addPlaceholder(t)}function removePlaceholder(e){e.querySelector(".selected-input").removeAttribute("placeholder")}function addPlaceholder(e){const t=e.querySelector(".selected-input");e.querySelectorAll(".selected-wrapper").length||document.activeElement===t||t.setAttribute("placeholder","Select language")}function createInitialTokens(e){let{options_selected:t}=getOptions(e);const n=e.parentNode;for(let e=0;e<t.length;e++)createToken(n,t[e])}function inputChange(e){const t=e.target.parentNode.parentNode,n=t.querySelector("select"),o=t.querySelector(".dropdown-icon"),s=e.target.value;if(s)o.classList.add("active"),populateAutocompleteList(n,s.trim());else{o.classList.remove("active");const e=new Event("click");o.dispatchEvent(e)}}function clickOnWrapper(e){const t=e.target;if("DIV"==t.tagName){const e=t.querySelector(".selected-input"),n=t.querySelector(".dropdown-icon");if(!n.classList.contains("active")){const e=new Event("click");n.dispatchEvent(e)}e.focus(),removePlaceholder(t)}}function openOptions(e){const t=e.target.parentElement.parentElement.querySelector(".dropdown-icon");if(!t.classList.contains("active")){const e=new Event("click");t.dispatchEvent(e)}e.stopPropagation()}function createToken(e,t){const n=e.querySelector(".search-container"),o=document.createElement("div");o.classList.add("selected-wrapper");const s=document.createElement("span");s.classList.add("selected-label"),s.innerText=t;const l=document.createElement("a");l.classList.add("selected-close"),l.setAttribute("tabindex","-1"),l.setAttribute("data-option",t),l.setAttribute("data-hits",0),l.setAttribute("href","#"),l.setAttribute("onClick","return false"),l.innerText="x",l.addEventListener("click",removeToken),o.appendChild(s),o.appendChild(l),e.insertBefore(o,n)}function clickDropdown(e){const t=e.target,n=t.parentNode.parentNode,o=n.querySelector(".selected-input"),s=n.querySelector("select");t.classList.toggle("active"),t.classList.contains("active")?(removePlaceholder(n),o.focus(),o.value?populateAutocompleteList(s,o.value):populateAutocompleteList(s,"",!0)):(clearAutocompleteList(s),addPlaceholder(n))}function clearAutocompleteList(e){e.parentNode.querySelector(".autocomplete-list").innerHTML=""}function populateAutocompleteList(e,t,n=!1){const{autocomplete_options:o}=getOptions(e);let s;s=n?o:autocomplete(t,o);const l=e.parentNode,c=(l.querySelector(".search-container"),l.querySelector(".autocomplete-list"));c.innerHTML="";const a=s.length;if(1==a){const e=document.createElement("li");if(e.innerText=s[0],e.setAttribute("data-value",s[0]),e.addEventListener("click",selectOption),c.appendChild(e),t.length==s[0].length){const t=new Event("click");e.dispatchEvent(t)}}else if(a>1)for(let e=0;e<a;e++){const t=document.createElement("li");t.innerText=s[e],t.setAttribute("data-value",s[e]),t.addEventListener("click",selectOption),c.appendChild(t)}else{const e=document.createElement("li");e.classList.add("not-cursor"),e.innerText="No options found",c.appendChild(e)}}function selectOption(e){const t=e.target.parentNode.parentNode.parentNode,n=t.querySelector(".selected-input");t.querySelector(`select option[value="${e.target.dataset.value}"]`).setAttribute("selected",""),createToken(t,e.target.dataset.value),n.value&&(n.value=""),n.focus(),e.target.remove();const o=t.querySelector(".autocomplete-list");if(!o.children.length){const e=document.createElement("li");e.classList.add("not-cursor"),e.innerText="No options found",o.appendChild(e)}const s=new Event("keyup");n.dispatchEvent(s),e.stopPropagation()}function autocomplete(e,t){if(!e)return t;let n=[];for(let o=0;o<t.length;o++)e.toLowerCase()===t[o].slice(0,e.length).toLowerCase()&&n.push(t[o]);return n}function getOptions(e){const t=Array.from(e.querySelectorAll("option")).map((e=>e.value)),n=Array.from(e.querySelectorAll("option:checked")).map((e=>e.value)),o=[];return t.forEach((e=>{n.includes(e)||o.push(e)})),o.sort(),{options_selected:n,autocomplete_options:o}}function removeToken(e){const t=e.target.dataset.option,n=e.target.parentNode.parentNode,o=n.querySelector(".selected-input"),s=n.querySelector(".dropdown-icon");n.querySelector(`select option[value="${t}"]`).removeAttribute("selected"),e.target.parentNode.remove(),o.focus(),s.classList.remove("active");const l=new Event("click");s.dispatchEvent(l),e.stopPropagation()}function deletePressed(e){const t=e.target.parentNode.parentNode,n=e.target,o=e.keyCode||e.charCode,s=t.querySelectorAll(".selected-wrapper");if(s.length){const e=s[s.length-1].querySelector("a");let t=+e.dataset.hits;if(8==o||46==o){if(!n.value)if(t>1){const t=new Event("click");e.dispatchEvent(t)}else e.dataset.hits=2}else e.dataset.hits=0}return!0}function addOption(e,t,n){const o=document.querySelector(e);let s=document.createElement("option");s.value=t,s.innerHTML=n,o.appendChild(s)}dropdowns.length>0&&dropdowns.forEach((e=>{createCustomDropdown(e)})),document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll("[data-multi-select-plugin]").forEach((e=>{init(e)})),document.addEventListener("click",(()=>{const e=document.querySelectorAll("[data-multi-select-plugin]");for(let t=0;t<e.length;t++){if(event)if(!e[t].parentElement.parentElement.contains(event.target)){const n=e[t].parentElement.parentElement,o=n.querySelector(".dropdown-icon"),s=n.querySelector(".autocomplete-list");o.classList.remove("active"),s.innerHTML="",addPlaceholder(n)}}}))})),function(){const e="select_show",t="select__option_selected",n=".select_show",o=".select__option_selected";class s{constructor(e,t){this._elRoot="string"==typeof e?document.querySelector(e):e,this._params=t||{},this._params.options&&(this._elRoot.classList.add("select"),this._elRoot.innerHTML=s.template(this._params)),this._elToggle=this._elRoot.querySelector('[data-select="toggle"]'),this._elRoot.addEventListener("click",this._onClick.bind(this))}_onClick(e){const t=e.target;switch(t.closest("[data-select]").dataset.select){case"toggle":this.toggle();break;case"option":this._changeValue(t)}}_update(e){const n=this._elRoot.querySelector(o);return n&&n.classList.remove(t),e.classList.add(t),this._elToggle.textContent=e.textContent,this._elToggle.value=e.dataset.value,this._elToggle.dataset.index=e.dataset.index,this._elRoot.dispatchEvent(new CustomEvent("select.change")),this._params.onSelected&&this._params.onSelected(this,e),e.dataset.value}_reset(){const e=this._elRoot.querySelector(o);return e&&e.classList.remove(t),this._elToggle.textContent="Select language",this._elToggle.value="",this._elToggle.dataset.index=-1,this._elRoot.dispatchEvent(new CustomEvent("select.change")),this._params.onSelected&&this._params.onSelected(this,null),""}_changeValue(e){e.classList.contains(t)||(this._update(e),this.hide())}show(){document.querySelectorAll(n).forEach((t=>{t.classList.remove(e)})),this._elRoot.classList.add(e)}hide(){this._elRoot.classList.remove(e)}toggle(){this._elRoot.classList.contains(e)?this.hide():this.show()}dispose(){this._elRoot.removeEventListener("click",this._onClick)}get value(){return this._elToggle.value}set value(e){let t=!1;if(this._elRoot.querySelectorAll(".select__option").forEach((n=>{if(n.dataset.value===e)return t=!0,this._update(n)})),!t)return this._reset()}get selectedIndex(){return this._elToggle.dataset.index}set selectedIndex(e){const t=this._elRoot.querySelector(`.select__option[data-index="${e}"]`);return t?this._update(t):this._reset()}}s.template=e=>{const t=e.name,n=e.options,o=e.targetValue;let s=[],l=-1,c="",a="Select language";return n.forEach(((e,t)=>{let n="";e[0]===o&&(n=" select__option_selected",l=t,c=e[0],a=e[1]),s.push(`<li class="select__option${n}" data-select="option" data-value="${e[0]}" data-index="${t}">${e[1]}</li>`)})),`<button type="button" class="select__toggle" name="${t}" value="${c}" data-select="toggle" data-index="${l}">${a}</button>\n    <div class="select__dropdown">\n      <ul class="select__options">${s.join("")}</ul>\n    </div>`},document.addEventListener("click",(t=>{t.target.closest(".select")||document.querySelectorAll(n).forEach((t=>{t.classList.remove(e)}))})),document.addEventListener("DOMContentLoaded",(()=>{new s("#select1",{name:"language",options:[["javascript","JavaScript"],["java","Java"],["c#","C#"]]})}))}();